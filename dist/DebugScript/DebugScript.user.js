// ==UserScript==
// @name         DebugScript
// @namespace    https://github.com/LegendaryB/tw-userscripts
// @version      0.1
// @author       LegendaryB
// @match		 https://*.die-staemme.de/game.php*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=die-staemme.de
// @grant        none
// ==/UserScript==

(()=>{"use strict";var e;class t{static registerTranslationProvider(e,t){this.translationProviderMap.set(e,t)}static unregisterTranslationProvider(e){this.translationProviderMap.delete(e)}static getPropertyKeyByHandlebar(e){return e.replace("{{","").replace("}}","")}}e=t,t.translationProviderMap=new Map,t.translate=t=>{let l=e.translationProviderMap.get(window.game_data.locale);return l?l[t]:"ERROR! NO TRANSLATION!"},t.translateAndReplace=t=>{let l=t.match(/{{{?(#[a-z]+ )?[a-z]+.[a-z]*}?}}/gi);if(!l)return t;for(const a of l){let l=e.getPropertyKeyByHandlebar(a),r=e.translate(l);t=t.replace(a,r)}return t},new t,window.game_data.world;class l{static getPlayerInfoTable(){let e=document.getElementById("player_info"),t=e.rows[2],l=e.rows[3],a=e.rows[4],r=5;document.querySelector('[src*="/premium/features/Premium_small.png"]')&&(r=6);let n=e.rows[r];return{Points:{Value:t.cells[1].innerText,Element:t},Rank:{Value:l.cells[1].innerText,Element:l},Bashpoints:{Value:a.cells[1].innerText,Element:a},Tribe:{Value:n.cells[1].innerText,Element:n},Element:e}}static getVillageTable(){let e=document.getElementById("villages_list");return{Header:this.getVillageTableHeader(e),Rows:this.getVillageTableRows(e),Element:e}}static getVillageTableHeader(e){let t=e.tHead,l=t.rows[0];return{Name:{Value:l.cells[0].innerText,Element:l.cells[0]},Coordinates:{Value:l.cells[1].innerText,Element:l.cells[1]},Points:{Value:l.cells[2].innerText,Element:l.cells[2]},Element:t}}static getVillageTableRows(e){let t=[];for(const l of e.tBodies[0].rows)t.push({Name:l.cells[0].innerText,Coordinates:l.cells[1].innerText,Points:Number(l.cells[2].innerText.replaceAll(".","")),Element:l});return t}}(async()=>{console.log(l.getVillageTable())})()})();